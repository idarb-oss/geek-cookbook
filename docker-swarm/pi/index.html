
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.1.2, mkdocs-material-7.1.2">
    
    
      
        <title>Setup - Geek Cookbook</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6f955dcd.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ef6f36e2.min.css">
        
          
          
          <meta name="theme-color" content="#009485">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
    
      
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="teal" data-md-color-accent="deep-orange">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#overview" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Geek Cookbook" class="md-header__button md-logo" aria-label="Geek Cookbook" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M448 48v32a16 16 0 0 1-16 16h-48v368a16 16 0 0 1-16 16h-32a16 16 0 0 1-16-16V96h-32v368a16 16 0 0 1-16 16h-32a16 16 0 0 1-16-16V352h-32a160 160 0 0 1 0-320h240a16 16 0 0 1 16 16z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Geek Cookbook
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Setup
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" data-md-state="active" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        
<a href="https://github.com/idarb-oss/geek-cookbook/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
  </div>
  <div class="md-source__repository">
    idarb-oss/geek-cookbook
  </div>
</a>
      </div>
    
  </nav>
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../dev/zsh/" class="md-tabs__link">
        Development Setup
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../design/" class="md-tabs__link md-tabs__link--active">
        Docker Swarm
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Geek Cookbook" class="md-nav__button md-logo" aria-label="Geek Cookbook" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path d="M448 48v32a16 16 0 0 1-16 16h-48v368a16 16 0 0 1-16 16h-32a16 16 0 0 1-16-16V96h-32v368a16 16 0 0 1-16 16h-32a16 16 0 0 1-16-16V352h-32a160 160 0 0 1 0-320h240a16 16 0 0 1 16 16z"/></svg>

    </a>
    Geek Cookbook
  </label>
  
    <div class="md-nav__source">
      
<a href="https://github.com/idarb-oss/geek-cookbook/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><path d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"/></svg>
  </div>
  <div class="md-source__repository">
    idarb-oss/geek-cookbook
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      <label class="md-nav__link" for="__nav_2">
        Development Setup
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Development Setup" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Development Setup
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/zsh/" class="md-nav__link">
        ZSH
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../../dev/docker/" class="md-nav__link">
        Docker
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      <label class="md-nav__link" for="__nav_3">
        Docker Swarm
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Docker Swarm" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Docker Swarm
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../design/" class="md-nav__link">
        Design
      </a>
    </li>
  

          
            
  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_2" type="checkbox" id="__nav_3_2" checked>
      
      <label class="md-nav__link" for="__nav_3_2">
        Hardware
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Hardware" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_2">
          <span class="md-nav__icon md-icon"></span>
          Hardware
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Raspberry Pi
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Raspberry Pi
      </a>
      
        
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
    <nav class="md-nav" aria-label="Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-we-will-do" class="md-nav__link">
    What we will do
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-we-have" class="md-nav__link">
    What we  have
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-up" class="md-nav__link">
    Setting up
  </a>
  
    <nav class="md-nav" aria-label="Setting up">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prepare-sd-card" class="md-nav__link">
    Prepare SD card
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#boot-up" class="md-nav__link">
    Boot Up
  </a>
  
    <nav class="md-nav" aria-label="Boot Up">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#set-hostname" class="md-nav__link">
    Set Hostname
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wifi" class="md-nav__link">
    WiFi
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
            
  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_3" type="checkbox" id="__nav_3_3" >
      
      <label class="md-nav__link" for="__nav_3_3">
        Preperation
        <span class="md-nav__icon md-icon"></span>
      </label>
      <nav class="md-nav" aria-label="Preperation" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_3">
          <span class="md-nav__icon md-icon"></span>
          Preperation
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
  
  
  
    <li class="md-nav__item">
      <a href="../swarm-setup/" class="md-nav__link">
        Swarm Setup
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../nfs/" class="md-nav__link">
        Shared Storage (NFS)
      </a>
    </li>
  

          
            
  
  
  
    <li class="md-nav__item">
      <a href="../keepalived/" class="md-nav__link">
        Keepalived
      </a>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    Overview
  </a>
  
    <nav class="md-nav" aria-label="Overview">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#what-we-will-do" class="md-nav__link">
    What we will do
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-we-have" class="md-nav__link">
    What we  have
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-up" class="md-nav__link">
    Setting up
  </a>
  
    <nav class="md-nav" aria-label="Setting up">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#prepare-sd-card" class="md-nav__link">
    Prepare SD card
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#boot-up" class="md-nav__link">
    Boot Up
  </a>
  
    <nav class="md-nav" aria-label="Boot Up">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#set-hostname" class="md-nav__link">
    Set Hostname
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#wifi" class="md-nav__link">
    WiFi
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/idarb-oss/geek-cookbook/edit/master/docs/docker-swarm/pi.md" title="Edit this page" class="md-content__button md-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
                  </a>
                
                
                  <h1>Raspberry Pi</h1>
                
                <p>Here we will explaine the setup procedure on a simple home setup by using Raspbery Pi's with Docker Swarm. Alltough Kubernetes with the use of Microk8s is also possible, kubernetes do also need more ram and cpu than Raspberry Pi 3 can give to be realy useful.</p>
<h2 id="overview">Overview</h2>
<p>Here we will go thrue the process of setting up <code>docker swarm</code> on a Raspberry Pi, and joining multiple Pis to form a production grade swarm cluster.</p>
<p>This setup can be fully headless or using an HDMI screen and USB keyboard to control nodes of your cluster.</p>
<p><img alt="picture" src="" /></p>
<h3 id="what-we-will-do">What we will do</h3>
<ul>
<li>Deploy Docker on Raspberry Pi</li>
<li>Joining multiple workers to form a cluster</li>
</ul>
<h3 id="what-we-have">What we  have</h3>
<ul>
<li>Linux type os here we use PopOS 20.04</li>
<li>Minimum 2 Raspberry Pis tough we will use 3</li>
<li>A micro-USB power cable for each Pi (USB-C for Pi4) we have PoE Hat</li>
<li>A USB power-supply with as many ports as you have boards</li>
<li>A microSD card per Pi (16GB recommended), flashed with an Ubuntu Server image</li>
</ul>
<h2 id="setting-up">Setting up</h2>
<p>Each Pi will have ubuntu 20.04 LTS intalled as the OS and we will use SSH to loginto them.</p>
<h3 id="prepare-sd-card">Prepare SD card</h3>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This will erase all excisitng content on the microSD card.</p>
</div>
<p>First, we need to insert the microSD card into you're computer. To do this we fist install the Raspberry Pi imager:</p>
<ul>
<li><a href="https://downloads.raspberrypi.org/imager/imager_latest_amd64.deb">Raspberry Pi Imager for Ubuntu</a></li>
<li><a href="https://downloads.raspberrypi.org/imager/imager_latest.exe">Raspberry Pi Imager for Windows</a></li>
<li><a href="https://downloads.raspberrypi.org/imager/imager_latest.dmg">Raspberry Pi Imager for macOS</a></li>
</ul>
<p>Once you have done this start the program and select the OS where we will pick Ubuntu 20.04.</p>
<ul>
<li>Press <code>CHOOSE OS</code></li>
</ul>
<p><img alt="pi-imager" src="../../img/pi_imager.png" /></p>
<ul>
<li>Scroll down and find <code>Other general purpose OS</code> then select <code>Ubuntu</code>.</li>
<li>You then see a list of the diffrent ubuntu OS images that can be installed. We will select <code>Ubuntu 20.04.2 LTS (RPI 3/4/400)</code> and we uses 64bit.</li>
<li>Select the SD card to write to by pressing <code>CHOOSE SD CARD</code> and press <code>WRITE</code> then wait until its done.</li>
</ul>
<p><img alt="pi-os-write" src="../../img/pi_write.png" /></p>
<h2 id="boot-up">Boot Up</h2>
<p>With the new writen SD card put it into the Pi and plug in the ethernet cable and connect it to the power. Wait for a while and we will need to find the IP address to the newly started Pi. For this we will use <a href="https://nmap.org/"><code>nmap</code></a> to search for the devices on the nettwork. Pi 3 starts with <code>B8:27:EB</code> as the MAC address while the Pi 4 uses <code>dc:a6:32</code>.</p>
<div class="highlight"><pre><span></span><code>$ sudo nmap -sP <span class="m">192</span>.168.10.0/24

Starting Nmap <span class="m">7</span>.80 <span class="o">(</span> https://nmap.org <span class="o">)</span> at <span class="m">2021</span>-04-21 <span class="m">18</span>:56 CEST
Nmap scan report <span class="k">for</span> ubuntu.home <span class="o">(</span><span class="m">192</span>.168.10.195<span class="o">)</span>
Host is up <span class="o">(</span><span class="m">0</span>.0038s latency<span class="o">)</span>.
MAC Address: B8:27:EB:##:##:## <span class="o">(</span>Raspberry Pi Foundation<span class="o">)</span>
Nmap <span class="k">done</span>: <span class="m">256</span> IP addresses <span class="o">(</span><span class="m">1</span> hosts up<span class="o">)</span> scanned <span class="k">in</span> <span class="m">0</span>.90 seconds
</code></pre></div>
<p>After you got the IP address we can login by using the default user name <code>ubuntu</code> with the password <code>ubuntu</code>. Answear <code>yes</code> when the beeing asked to continue the connection.</p>
<div class="highlight"><pre><span></span><code>ssh ubuntu@192.168.10.195

Are you sure you want to <span class="k">continue</span> connecting <span class="o">(</span>yes/no/<span class="o">[</span>fingerprint<span class="o">])</span>?
</code></pre></div>
<p>The first part of the login will be resetting the default password so first write <code>ubuntu</code> then your own new password to be used.</p>
<p>First thing to do is update the OS by doing:</p>
<div class="highlight"><pre><span></span><code>sudo apt-get update <span class="o">&amp;&amp;</span> sudo apt-get upgrade -y
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you get an error saying <code>Connection failed [IP: 2001:67c:1360:8001::24 80]</code> you have an issue by connection over IPv6 to force IPv4 add the following to the <code>apt-get</code> command <code>-o Acquire::ForceIPv4=true</code>. Example for update <code>sudo apt-get -o Acquire::ForceIPv4=true update</code>.
To make it simpler add this to the cli config file: <code>alias apt-get="sudo apt-get -o Acquire::ForceIPv4=true"</code></p>
</div>
<h3 id="set-hostname">Set Hostname</h3>
<p>To be able to give names to the Pis we will use the <code>hostnamectl</code> so that we can more easly get the hold of the Pis on the nettwork.</p>
<p>In this setup we will name the Pis with <code>swarm#</code> where the # represents a number. Here we will setup 3 nodes so we will have the name <code>swamr1</code>, <code>swarm2</code> and <code>swarm3</code>.</p>
<p>To set the hostname use the following command:</p>
<div class="highlight"><pre><span></span><code>sudo hostnamectl set-hostname swarm1
</code></pre></div>
<p>then reboot the nodes after the change by:</p>
<div class="highlight"><pre><span></span><code>sudo reboot
</code></pre></div>
<h2 id="wifi">WiFi</h2>
<p>On <code>ubuntu</code> we can activate the <em>wifi</em> configuration by using <a href="https://netplan.io/">netplan</a> to configure it up. Let's activate the wifi where we have some info allready given:</p>
<ul>
<li>SSID the name of the nettwork</li>
<li>The password of the nettwork</li>
<li>We want to use DHCP4 configured to get an IP address</li>
</ul>
<p>So netplan is an network configuration abstraction that uses yaml files for configuration. The files are located at <code>/etc/netplan/*.yaml</code> where we can generate new files as we need. Lets create a new yaml configuration for our wifi connection.</p>
<p>Lets start by finding the name of our wifi by doing</p>
<div class="highlight"><pre><span></span><code>iw dev
</code></pre></div>
<p>This will give an output similar to where we need the <code>wlan0</code> under <em>Interface</em>.</p>
<div class="highlight"><pre><span></span><code>phy#0
    Interface wlan0
        ifindex 3
        wdev 0x1
        addr b8:27:eb:52:87:6a
        type managed
        channel 34 (5170 MHz), width: 20 MHz, center1: 5170 MHz
</code></pre></div>
<p>Before we start to configure with <em>netplan</em> lets make sure the wifi interface is up and running by doing:</p>
<div class="highlight"><pre><span></span><code>sudo ip link <span class="nb">set</span> dev wlan0 up
</code></pre></div>
<p>Lets create a new yaml configuration for <em>netplan</em> by doing:</p>
<div class="highlight"><pre><span></span><code>sudo nano /etc/netplan/01-wifi-config.yaml
</code></pre></div>
<p>And write the information like:</p>
<div class="highlight"><pre><span></span><code><span class="nt">network</span><span class="p">:</span>
  <span class="nt">version</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">2</span>
  <span class="nt">wifis</span><span class="p">:</span>
    <span class="nt">wlan0</span><span class="p">:</span>
      <span class="nt">dhcp4</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">yes</span>
      <span class="nt">access-points</span><span class="p">:</span>
        <span class="p p-Indicator">[</span><span class="nv">SSID</span><span class="p p-Indicator">]:</span>
          <span class="nt">password</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="nv">SSID-PASSWORD</span><span class="p p-Indicator">]</span>
</code></pre></div>
<p>and change out the [SSID] by the name of the nettwork and the [SSID-PASSWORD] with the password of the wifi nettwork.</p>
<p>Then close save and close the nano editor by doing <code>ctrl+o</code> and <code>ctrl+x</code> and you would see the new file in the <em>netplan</em> folder.</p>
<p>To activate the new configuration do:</p>
<div class="highlight"><pre><span></span><code>sudo netplan generate
sudo netplan apply
</code></pre></div>
<p>And if you want and can do a <code>sudo reboot</code>of the system. Now the system will connect to the wifi nettwork given. To check the IP address do the following:</p>
<div class="highlight"><pre><span></span><code>ip address
</code></pre></div>
                
                  
                    

<hr>
<div class="md-source-date">
  <small>
    
      Last update: 2021-06-01
    
  </small>
</div>
                  
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        <a href="../design/" class="md-footer__link md-footer__link--prev" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Design
            </div>
          </div>
        </a>
      
      
        <a href="../swarm-setup/" class="md-footer__link md-footer__link--next" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Swarm Setup
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2021 - 2021 Idar Bergli
          </div>
        
        Made with
        <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
          Material for MkDocs
        </a>
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.tracking", "navigation.sections", "header.autohide"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing"}, "search": "../../assets/javascripts/workers/search.fe42c31b.min.js", "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.4ea5477f.min.js"></script>
      
    
  </body>
</html>